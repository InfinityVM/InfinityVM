#!/bin/bash

RPC_URL=${RPC_URL:-http://localhost:8545}
CHAIN_ID=${CHAIN_ID:-31337}
PRIVATE_KEY=${PRIVATE_KEY:-0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80}
RESULT_WITH_METADATA=${1:-"0000000000000000000000000000000000000000000000000000000000000001fc7fea3498733d20c11a0cf2984b78f88b954525730657cd0283d747479b3d6a00000000000000000000000000000000000000000000000000000000000f424000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000970726f6772616d494400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000a5889624184923c0c4cfc3499cbea659e34f7809000000000000000000000000000000000000000000000000000000000000000a"}
SIGNATURE=${2:-"acc9ae3623fbbda084929352eb449802f76fa13cdbfdb8b5bcb36564893d966270743017d90e598a13ae718c03a3aeb26330c98ff8fb96a4a0a40f114816a3921c"}

# cd to the directory of this script so that this can be run from anywhere
parent_path=$( cd "$(dirname "${BASH_SOURCE[0]}")" ; pwd -P )
cd "$parent_path"

forge script ../SubmitResult.s.sol:SubmitResult --sig "submitResult(bytes calldata resultWithMetadata, bytes calldata signature)" $RESULT_WITH_METADATA $SIGNATURE --rpc-url $RPC_URL --private-key $PRIVATE_KEY --chain-id $CHAIN_ID --broadcast -v
