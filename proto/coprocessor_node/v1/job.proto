syntax = "proto3";
package coprocessor_node.v1;

import "coprocessor_node/v1/zkvm_executor.proto";

option go_package = "github.com/ethos-works/infinityvm/server/pkg/types";

// JobStatus defines the status of a submitted coprocessor job.
enum JobStatus {
  JOB_STATUS_UNSPECIFIED = 0;
  JOB_STATUS_PENDING = 1;
  JOB_STATUS_DONE = 2;
  JOB_STATUS_FAILED = 3;
}

// Job represents a program to be executed by the coprocessor with specific
// inputs.
message Job {
  // The job ID generated by the InfinityVM chain.
  uint32 id = 1;
  // The ZK program verification key
  bytes program_verifying_key = 2;
  // Type of ZKVM to execute
  VmType vm_type = 3;
  // Program execution input
  bytes input = 4;
  // The address of the contract to execute a callback with a result with
  bytes contract_address = 5;
  // CPU cycle limit for job execution
  uint64 max_cycles = 6;
  // The result of job execution
  bytes result = 7;
  // The address of the operator that executed the job
  bytes zkvm_operator_address = 8;
  // The signature of the operator that executed the job
  bytes zkvm_operator_signature = 9;
  // The status of the job.
  JobStatus status = 10;
}
